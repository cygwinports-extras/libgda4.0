ORIG_PN="libgda"
inherit gnome2

DESCRIPTION="GNOME Database Access libraries"
HOMEPAGE="http://www.gnome-db.org/"

PATCH_URI="
	4.0.3-dlopen-libdb.patch
	4.0.3-gdareport-install.patch
	4.0.8-introspection.patch
"

PKG_NAMES="${PN} ${PN}_4 ${PN}-bin ${PN}-devel girepository-Gda4.0"

libgda4_0_4_CONTENTS="etc/ usr/bin/*-4.0-4.dll usr/lib/libgda-4.0/trml2*/
                      usr/share/doc/ usr/share/libgda-4.0/dtd/
                      usr/share/libgda-4.0/information_schema.xml usr/share/locale/"
libgda4_0_bin_CONTENTS="usr/bin/*-4.0.exe usr/share/libgda-4.0/web/ usr/share/man/man1/"
libgda4_0_devel_CONTENTS="usr/include/ usr/lib/libgda*-4.0.*
                        usr/lib/pkgconfig/libgda-4.0.pc
                        usr/lib/pkgconfig/libgda-report-4.0.pc
                        usr/lib/pkgconfig/libgda-xslt-4.0.pc
                        usr/share/gtk-doc/"
girepository_Gda4_0_CONTENTS="usr/*/gir*/Gda-4.0.*"

for prov in bdb mdb mysql postgres sqlite
do
	PKG_NAMES+=" ${PN}-provider-${prov}"
	declare \
	libgda4_0_provider_${prov}_CONTENTS="usr/lib/libgda-4.0/providers/*gda-${prov}.*
	                                     usr/lib/pkgconfig/libgda-${prov}-4.0.pc
	                                     usr/share/libgda-4.0/${prov}*"
	CYGCONF_ARGS+=" --with-${prov#free}=/usr"
done

for noprov in firebird ibmdb2 java ldap msql odbc oracle sybase tds xbase
do
	CYGCONF_ARGS+=" --without-${noprov}"
done

CYGCONF_ARGS+=" --disable-binreloc --disable-default-binary"
